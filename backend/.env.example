# =============================================================================
# Anonymous Chat Backend - Environment Configuration
# =============================================================================
# Copy this file to .env and modify as needed

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000
API_PREFIX=api/v1

# -----------------------------------------------------------------------------
# MongoDB Configuration
# -----------------------------------------------------------------------------
MONGODB_URI=mongodb://localhost:27017/anonymous-chat
MONGODB_DB_NAME=anonymous-chat

# -----------------------------------------------------------------------------
# Redis Configuration (Required for horizontal scaling)
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# BullMQ Queue Configuration
# -----------------------------------------------------------------------------
BULLMQ_PREFIX=anon-chat

# -----------------------------------------------------------------------------
# CORS Configuration
# Comma-separated list of allowed origins
# -----------------------------------------------------------------------------
CORS_ORIGINS=http://localhost:5173,http://localhost:4173

# -----------------------------------------------------------------------------
# Session Configuration
# -----------------------------------------------------------------------------
SESSION_TTL_HOURS=24

# -----------------------------------------------------------------------------
# Rate Limiting Configuration (Throttler)
# Protects against DoS and brute force attacks
# -----------------------------------------------------------------------------
# Short-term rate limit: max requests per second
THROTTLE_SHORT_LIMIT=10

# Medium-term rate limit: max requests per 10 seconds
THROTTLE_MEDIUM_LIMIT=50

# Long-term rate limit: max requests per minute
THROTTLE_LONG_LIMIT=200

# -----------------------------------------------------------------------------
# WebSocket Rate Limiting (per 10 seconds)
# Protects against spam and abuse
# -----------------------------------------------------------------------------
WS_MESSAGE_RATE_LIMIT=10
WS_TYPING_RATE_LIMIT=20
WS_REACTION_RATE_LIMIT=15
WS_DELETE_RATE_LIMIT=5
WS_JOIN_RATE_LIMIT=5

# Block duration for rate limit violations (in seconds)
RATE_LIMIT_BLOCK_DURATION=30
